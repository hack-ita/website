<header class="w-screen fixed top-0 left-0 right-0 z-50 header transition-all">
  <div class="max-w-full lg:max-w-475 mx-auto py-3 px-5 transition-all headerBar">
    <div class="flex items-center justify-between gap-3">
      
      <!-- Logo -->
      <div class="grow">
        <a href="{{ site.BaseURL }}" aria-label="{{ site.Title }} homepage">
          <img src="{{ site.Params.header.logo | relURL }}" alt="{{ site.Title }}" class="h-25 headerLogo transition-all">
        </a>
      </div>

      <div class="lg:order-3 relative inline-block mr-3 lg:mr-0">
        <label for="theme-selector" class="sr-only">Theme</label>
        <select
          id="theme-selector"
          class="appearance-none p-3 rounded-md border border-dark bg-light text-dark dark:bg-dark dark:text-light dark:border-light focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        >
          <option value="system">System</option>
          <option value="light">Light</option>
          <option value="dark">Dark</option>
        </select>
      </div>
      
      <!-- Mobile Menu Toggle -->
      <button 
        class="flex flex-col items-end cursor-pointer gap-y-3 menuToggler lg:hidden"
        aria-controls="primary-navigation"
        aria-expanded="false"
        aria-label="Toggle menu"
      >
        <span class="w-9 h-0.5 bg-dark dark:bg-light rounded-full transition-transform"></span>
        <span class="w-9 h-0.5 bg-dark dark:bg-light rounded-full transition-transform"></span>
      </button>
      
      <!-- Navigation and CTA -->
      <div 
        class="menu lg:grow absolute top-27 lg:static translate-y-10 pointer-events-none lg:pointer-events-auto opacity-0 lg:opacity-100 lg:translate-y-0 transition duration-500 h-screen lg:h-auto menu-glass left-0 w-svw lg:w-auto lg:flex lg:justify-between space-y-5 lg:space-y-0"
      >
        <nav 
          id="primary-navigation" 
          class="flex flex-col lg:flex-row justify-between items-center space-y-5 lg:space-y-0" 
          role="navigation" 
          aria-label="Primary"
        >
          {{ range site.Menus.main }}
            {{ if eq $.Page.RelPermalink .URL }}
              <span
                class="cursor-pointer text-sm font-bold uppercase relative after:absolute text-primary after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:w-full after:origin-bottom after:scale-x-100 after:bg-primary after:transition-transform after:duration-300 after:ease-[cubic-bezier(0.65_0.05_0.36_1)]"
                aria-current="page"
              >
                {{ .Name }}
              </span>
            {{ else }}
              {{ partial "components/link.html" (dict "label" .Name "url" .URL "class" "px-3") }}
            {{ end }}
          {{ end }}
        </nav>
        
        <!-- CTA Button -->
        <div class="flex gap-3 items-stretch lg:justify-end">
          {{ if site.Params.header.cta.enable }}
          {{ partial "components/button.html" (dict "link" "true" "label" site.Params.header.cta.label "url" site.Params.header.cta.link "size" "full" "class" "lg:w-auto" ) }}
          {{ end }}
        </div>
      </div>
      
    </div>
  </div>
</header>