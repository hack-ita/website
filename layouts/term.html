{{ define "main" }}
{{/* hero */}}
<section class="pt-30 px-5" aria-labelledby="category-title">
  <div class="max-w-7xl mx-auto flex flex-col-reverse lg:flex-row gap-10 pb-10">

    <!-- Content -->
    <header class="flex flex-col justify-start items-start gap-5">

      {{ partial "components/breadcrumb.html" . }}

      <span
        class="py-1 px-3 rounded-full text-center text-sm border border-primary text-dark dark:text-light uppercase relative">
        Categoria {{ .Title }}
      </span>

      <h1 id="category-title" class="text-dark dark:text-light hero-heading uppercase">
        {{ .Params.hero_title }}
      </h1>

      {{ with .Description }}
      <p class="text-dark dark:text-light max-w-2xl text-pretty">
        {{ . }}
      </p>
      {{ end }}

      <!-- Meta information -->
      <dl class="flex gap-x-10 gap-y-5 items-stretch flex-wrap">

        <div class="flex flex-col gap-2">
          <dt class="text-dark dark:text-light">Articoli</dt>
          <dd class="heading-sm text-dark dark:text-light">
            <strong class="text-primary">{{ .Pages.Len }}+</strong> Note
          </dd>
        </div>

        <div class="flex flex-col gap-2">
          <dt class="text-dark dark:text-light">Focus</dt>
          <dd class="heading-sm text-dark dark:text-light">
            <strong class="text-primary">OSCP</strong> · Red Team
          </dd>
        </div>

        <div class="flex flex-col gap-2">
          <dt class="text-dark dark:text-light">Struttura</dt>
          <dd class="heading-sm text-dark dark:text-light">
            <strong class="text-primary">Recon</strong> → Exploit
          </dd>
        </div>

      </dl>
    </header>

    <!-- Image -->
    <figure class="lg:shrink-0">
      {{ partial "components/image.html" (dict "src" .Params.image "alt" ( print "Categoria " .Title " - " .Params.hero_title) "class" "h-full lg:h-80 object-cover rounded-md") }}
    </figure>

  </div>

  <div class="h-1 lg:w-1/3 mx-auto bg-linear-to-r from-transparent via-primary to-transparent"></div>
</section>
{{/* /hero */}}

{{/* list */}}
<section class="max-w-7xl mx-auto py-10" aria-labelledby="category-articles-title">
    <header class="mb-10">
        <h2 id="category-articles-title" class="text-dark dark:text-light hero-heading">
            <span class="text-primary">{{ .Title }}</span> Articles
        </h2>
    </header>

  {{ partial "components/filters.html" . }}
  <!-- NO RESULTS -->
  <div id="noResults"
       class="hidden py-20 text-center heading-sm text-dark dark:text-light">
       <div class="flex flex-col gap-3">
         No results found.
         <div>
           {{ partial "components/button.html" (dict "label" "Clear Filters" "class" "clear-filters") }}
         </div>
       </div>
  </div>

    <ul class="flex flex-col gap-10">
        {{ range .Pages }}
          <li
            class="post-item grid relative lg:grid-cols-5 gap-5 p-5 lg:p-3 bg-glass border border-dark/20 dark:border-light/20 rounded-md shadow-xl transition-shadow hover:shadow-primary/20"
            {{ with .Params.categories }}
              data-categories="{{ delimit (apply . "urlize" ".") "," }}"
            {{ else }}
              data-categories=""
            {{ end }}
            {{ with .Params.subcategories }}
              data-tags="{{ delimit (apply . "urlize" ".") "," }}"
            {{ else }}
              data-tags=""
            {{ end }}
          >
            <a href="{{ .RelPermalink }}" class="absolute inset-0"></a>
            <figure class="lg:col-span-2">
              {{ partial "components/image.html" (dict "src" .Params.image "alt" .Title "class" "size-full lg:h-40 object-cover rounded-md") }}
            </figure>

            <div class="flex flex-col gap-5 lg:gap-3 justify-between lg:col-span-3">
                <span class="text-dark dark:text-light uppercase">{{ index .Params.categories 0 | default "Recon & mapping" }}</span>
                <h3 class="heading-sm text-primary">{{ .Title }}</h3>
                {{ with .Description }}
                <p class="text-dark dark:text-light">{{ . }}</p>
                {{ end }}
                <div>
                    {{ partial "components/button.html" (dict "link" "true" "label" "Continua a leggere" "url" .RelPermalink) }}
                </div>
            </div>
        </li>
        {{ end }}
    </ul>
</section>
{{/* /list */}}
{{ end }}